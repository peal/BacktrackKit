  
  [1X4 [33X[0;0YConstraints[133X[101X
  
  [33X[0;0YInformally,   a   [13Xconstraint[113X   is  a  [9Xtrue[109X/[9Xfalse[109X  mathematical  property  of
  permutations that is used to define a search problem in the symmetric group.
  For  example, the property could be ‚Äúbelongs to the permutation group G‚Äù, or
  ‚Äúcommutes  with the permutation x‚Äù, or ‚Äúmaps the set A to the set B‚Äù, or ‚Äúis
  an automorphism of the digraph D‚Äù.[133X
  
  [33X[0;0YIn BacktrackKit, a constraint is implemented as a record that must contain:[133X
  
  [30X    [33X[0;6YA  member  called  [10Xname[110X,  which  is  a  string  giving the name of the
        constraint;[133X
  
  [30X    [33X[0;6YA  member  called  [10Xlargest_required_point[110X,  which  is an integer which
        gives  the  smallest  size  partition  this  refiner will work on. For
        example, given a set we would expect this to be the largest element of
        the set.[133X
  
  [30X    [33X[0;6YAn  optional  member  called  [10Xlargest_moved_point[110X, which is an integer
        giving  an  upper  bound  on the largest point this refiner could ever
        move.  For  many  refiners  this  will not exist -- for example a 'set
        stabilizer' refiner will always permute values outside the set.[133X
  
  [30X    [33X[0;6YA  member  called [10Xrefine[110X, which is a record; more information is given
        below.[133X
  
  [33X[0;0Yand a method of check permutations, either:[133X
  
  [30X    [33X[0;6YTwo  members, called [10Ximage[110X and [10Xresult[110X, where [10Ximage[110X takes a permutation
        and  [10Xresult[110X  which  is  a  function  which  takes  no arguments, where
        [10Ximage(perm)=result[110X if the permutation satisfies the constraint[133X
  
  [33X[0;0YOr:[133X
  
  [30X    [33X[0;6YA  member  called [10Xcheck[110X, which is a function taking two arguments, the
        constraint and a permutation, and which checks whether the permutation
        satisfies the constraint; and[133X
  
  [33X[0;0Y[10Ximage[110X  and  [10Xresult[110X  must  be implemented for finding canonical images. All 3
  functions can be implemented, as long as they are consistent.[133X
  
  [33X[0;0YA constraint may also optionally contain any of the following members:[133X
  
  [30X    [33X[0;6YA  member called [10Xbtdata[110X. The data in this member will be automatically
        saved and restored on backtrack.[133X
  
  
  [1X4.1 [33X[0;0YThe record [10Xrefine[110X[101X[1X[133X[101X
  
  [33X[0;0YThe [10Xrefine[110X member of a constraint is a record that contains functions which,
  if  present,  will be called to inform the constraint of behaviour as search
  progresses,  and  to  give  the  constraint the opportunity to influence the
  search. The permissible functions are given described below.[133X
  
  [33X[0;0YThese  functions  will  always be passed at least two arguments: firstly the
  constraint  itself,  and  then  the  partition stack. Details of any further
  arguments are described with the relevant function, below.[133X
  
  [30X    [33X[0;6Y[10Xinitialise[110X  [13X(required)[113X.  This is called when search begins. Note that,
        since  the  [10Xrefine.initialise[110X  function  is  called  for  all relevant
        constraints at the beginning of search, the partition may have already
        been   split   by   some   earlier   constraint   by   the  time  that
        [10Xrefine.initialise[110X is called for a later constraint.[133X
  
  [33X[0;0YAt most one of the following two functions will generally be implemented.[133X
  
  [30X    [33X[0;6Y[10Xchanged[110X  -  Will  be  called after one or more splits in the partition
        occur.[133X
  
  [30X    [33X[0;6Y[10Xfixed[110X  -  Will  be  called  after  one or more points in the partition
        became fixed.[133X
  
  [30X    [33X[0;6Y[10XrBaseFinished[110X  -  The  rBase  has  been created (is passed the rbase).
        Constraints  which  care about this can use this to remember the rBase
        construction is finished.[133X
  
