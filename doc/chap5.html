<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>GAP (BacktrackKit) - Chapter 5: Refiners</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="generator" content="GAPDoc2HTML" />
<link rel="stylesheet" type="text/css" href="manual.css" />
<script src="manual.js" type="text/javascript"></script>
<script type="text/javascript">overwriteStyle();</script>
</head>
<body class="chap5"  onload="jscontent()">


<div class="chlinktop"><span class="chlink1">Goto Chapter: </span><a href="chap0.html">Top</a>  <a href="chap1.html">1</a>  <a href="chap2.html">2</a>  <a href="chap3.html">3</a>  <a href="chap4.html">4</a>  <a href="chap5.html">5</a>  <a href="chap6.html">6</a>  <a href="chap7.html">7</a>  <a href="chap8.html">8</a>  <a href="chapBib.html">Bib</a>  <a href="chapInd.html">Ind</a>  </div>

<div class="chlinkprevnexttop">&nbsp;<a href="chap0.html">[Top of Book]</a>&nbsp;  <a href="chap0.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap4.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap6.html">[Next Chapter]</a>&nbsp;  </div>

<p id="mathjaxlink" class="pcenter"><a href="chap5_mj.html">[MathJax on]</a></p>
<p><a id="X786EF6928319D57A" name="X786EF6928319D57A"></a></p>
<div class="ChapSects"><a href="chap5.html#X786EF6928319D57A">5 <span class="Heading">Refiners</span></a>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap5.html#X85191AFE78787117">5.1 <span class="Heading">Introduction to refiners</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap5.html#X87747BA382104C75">5.2 <span class="Heading">The record <code class="code">refine</code></span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap5.html#X7F61F52979EC5E32">5.3 <span class="Heading">Constructing refiners</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap5.html#X7EB9D3387F93831C">5.3-1 DummyRefiner</a></span>
</div></div>
</div>

<h3>5 <span class="Heading">Refiners</span></h3>

<p><a id="X85191AFE78787117" name="X85191AFE78787117"></a></p>

<h4>5.1 <span class="Heading">Introduction to refiners</span></h4>

<p>In <strong class="pkg">BacktrackKit</strong>, a refiner is implemented as a record that must contain:</p>


<ul>
<li><p>A member called <code class="code">name</code>, which is a string giving the name of the constraint;</p>

</li>
<li><p>A member called <code class="code">largest_required_point</code>, which is an integer which gives the smallest size partition this refiner will work on. For example, given a set we would expect this to be the largest element of the set.</p>

</li>
<li><p>A member called <code class="code">constraint</code>, which is a constraint object, such that the refiner is refining for the permutations that satisfy the constraint.</p>

</li>
<li><p>A member called <code class="code">refine</code>, which is a record; more information is given below.</p>

</li>
</ul>
<p>A constraint may also optionally contain any of the following members:</p>


<ul>
<li><p>A member called <code class="code">btdata</code>. The data in this member will be automatically saved and restored on backtrack.</p>

</li>
</ul>
<p><a id="X87747BA382104C75" name="X87747BA382104C75"></a></p>

<h4>5.2 <span class="Heading">The record <code class="code">refine</code></span></h4>

<p>The <code class="code">refine</code> member of a constraint is a record that contains functions which, if present, will be called to inform the constraint of behaviour as search progresses, and to give the constraint the opportunity to influence the search. The permissible functions are given described below.</p>

<p>These functions will always be passed at least two arguments: firstly the constraint itself, and then the partition stack. Details of any further arguments are described with the relevant function, below.</p>


<ul>
<li><p><code class="code">initialise</code> <em>(required)</em>. This is called when search begins. Note that, since the <code class="code">refine.initialise</code> function is called for all relevant constraints at the beginning of search, the partition may have already been split by some earlier constraint by the time that <code class="code">refine.initialise</code> is called for a later constraint.</p>

</li>
</ul>
<p>At most one of the following two functions will generally be implemented.</p>


<ul>
<li><p><code class="code">changed</code> - Will be called after one or more splits in the partition occur.</p>

</li>
<li><p><code class="code">fixed</code> - Will be called after one or more points in the partition became fixed.</p>

</li>
</ul>

<ul>
<li><p><code class="code">rBaseFinished</code> - The rBase has been created (is passed the rbase). Constraints which care about this can use this to remember the rBase construction is finished.</p>

</li>
</ul>
<p><a id="X7F61F52979EC5E32" name="X7F61F52979EC5E32"></a></p>

<h4>5.3 <span class="Heading">Constructing refiners</span></h4>

<p><a id="X7EB9D3387F93831C" name="X7EB9D3387F93831C"></a></p>

<h5>5.3-1 DummyRefiner</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DummyRefiner</code>( <var class="Arg">constraint</var> )</td><td class="tdright">(&nbsp;attribute&nbsp;)</td></tr></table></div>
<p>This wraps a constraint in a refiner that doesn't do any refining.</p>


<div class="chlinkprevnextbot">&nbsp;<a href="chap0.html">[Top of Book]</a>&nbsp;  <a href="chap0.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap4.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap6.html">[Next Chapter]</a>&nbsp;  </div>


<div class="chlinkbot"><span class="chlink1">Goto Chapter: </span><a href="chap0.html">Top</a>  <a href="chap1.html">1</a>  <a href="chap2.html">2</a>  <a href="chap3.html">3</a>  <a href="chap4.html">4</a>  <a href="chap5.html">5</a>  <a href="chap6.html">6</a>  <a href="chap7.html">7</a>  <a href="chap8.html">8</a>  <a href="chapBib.html">Bib</a>  <a href="chapInd.html">Ind</a>  </div>

<hr />
<p class="foot">generated by <a href="http://www.math.rwth-aachen.de/~Frank.Luebeck/GAPDoc">GAPDoc2HTML</a></p>
</body>
</html>
